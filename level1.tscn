[gd_scene format=3 uid="uid://bv8jltn523bce"]

[ext_resource type="PackedScene" uid="uid://2wy3lf084bm7" path="res://Levels/Level.tscn" id="1_mx85b"]
[ext_resource type="Shader" uid="uid://d0hl15orlcdml" path="res://Shaders/the_maskerrrrrr.gdshader" id="2_hx44q"]
[ext_resource type="Texture2D" uid="uid://dtovvpm7o8oas" path="res://new_gradient_texture_2d.tres" id="3_n8vhr"]
[ext_resource type="Texture2D" uid="uid://d1pxvs8i5av8t" path="res://test_mask_alpha_negative.png" id="4_eqrsh"]
[ext_resource type="Texture2D" uid="uid://bwgq1lmjusrgc" path="res://test_mask_alpha.png" id="5_3l65w"]
[ext_resource type="Texture2D" uid="uid://bdsue340p8wq6" path="res://Levels/Level0/Lvl0_blue_mask.png" id="6_rjtee"]
[ext_resource type="Texture2D" uid="uid://rq1k2dujdtm6" path="res://Levels/Level1/lvl1_red_mask.png" id="6_ycv2e"]
[ext_resource type="Texture2D" uid="uid://bd8f2de4rd08m" path="res://Levels/Level0/Lvl0_green_mask.png" id="7_1idop"]
[ext_resource type="Texture2D" uid="uid://717lpahwjqyi" path="res://Levels/Level1/lvl1_green_mask.png" id="7_c5gc3"]
[ext_resource type="Texture2D" uid="uid://n2npv1l7ospx" path="res://Levels/Level1/lvl1_blue_mask.png" id="8_6e4cv"]
[ext_resource type="Texture2D" uid="uid://cg12j6qoyk4gg" path="res://Levels/Level0/Lvl0_red_mask.png" id="8_beq0j"]
[ext_resource type="Texture2D" uid="uid://bxioucw8hjd07" path="res://Levels/Level0/Lvl0_blue_haz.png" id="9_nauge"]
[ext_resource type="Texture2D" uid="uid://cvdfnfly2m5bj" path="res://Levels/Level1/lvl1_red_col.png" id="9_uuy0h"]
[ext_resource type="Texture2D" uid="uid://dg213ggqj5guy" path="res://Levels/Level1/lvl1_green_col.png" id="10_52iny"]
[ext_resource type="Texture2D" uid="uid://dftlb7hd1a6sr" path="res://Levels/Level0/Lvl0_green_haz.png" id="10_ycv2e"]
[ext_resource type="Texture2D" uid="uid://30g3jfqlgi88" path="res://Levels/Level0/Lvl0_red_haz.png" id="11_c5gc3"]
[ext_resource type="Texture2D" uid="uid://lo55aevilck7" path="res://Levels/Level1/lvl1_blue_col.png" id="11_nxqqj"]
[ext_resource type="Texture2D" uid="uid://d37h2kyha17p4" path="res://Levels/Level1/lvl1_red_haz.png" id="12_7nyxr"]
[ext_resource type="Texture2D" uid="uid://dv1304j0ywq8" path="res://Levels/Level1/lvl1_green_haz.png" id="13_43lh3"]
[ext_resource type="Texture2D" uid="uid://da5d877rsrsl" path="res://Levels/Level1/lvl1_blue_haz.png" id="14_5le63"]
[ext_resource type="Texture2D" uid="uid://cmpwj2as22p5r" path="res://Levels/Level1/lvl1_red.png" id="15_uuy0h"]
[ext_resource type="Texture2D" uid="uid://iq0r6oog18mc" path="res://Levels/Level1/lvl1_green.png" id="16_52iny"]
[ext_resource type="Texture2D" uid="uid://3g22y8fc62kk" path="res://Levels/Level1/lvl1_blue.png" id="17_nxqqj"]

[sub_resource type="ViewportTexture" id="ViewportTexture_uuy0h"]

[sub_resource type="ViewportTexture" id="ViewportTexture_52iny"]

[sub_resource type="ViewportTexture" id="ViewportTexture_nxqqj"]

[sub_resource type="ViewportTexture" id="ViewportTexture_7nyxr"]

[sub_resource type="ViewportTexture" id="ViewportTexture_43lh3"]

[sub_resource type="ViewportTexture" id="ViewportTexture_5le63"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pieet"]
resource_local_to_scene = true
shader = ExtResource("2_hx44q")
shader_parameter/red_texture = SubResource("ViewportTexture_5le63")
shader_parameter/red_mask = ExtResource("5_3l65w")
shader_parameter/green_texture = SubResource("ViewportTexture_7nyxr")
shader_parameter/green_mask = ExtResource("4_eqrsh")
shader_parameter/blue_texture = SubResource("ViewportTexture_52iny")
shader_parameter/blue_mask = ExtResource("3_n8vhr")
shader_parameter/red_temp_masks = SubResource("ViewportTexture_43lh3")
shader_parameter/green_temp_masks = SubResource("ViewportTexture_nxqqj")
shader_parameter/blue_temp_masks = SubResource("ViewportTexture_uuy0h")

[sub_resource type="ViewportTexture" id="ViewportTexture_qiqrj"]
viewport_path = NodePath("BlueLayer/TempMasks")

[sub_resource type="ViewportTexture" id="ViewportTexture_xm42n"]
viewport_path = NodePath("BlueLayer/LevelVisual")

[sub_resource type="ViewportTexture" id="ViewportTexture_6wmxb"]
viewport_path = NodePath("GreenLayer/TempMasks")

[sub_resource type="ViewportTexture" id="ViewportTexture_8652m"]
viewport_path = NodePath("GreenLayer/LevelVisual")

[sub_resource type="ViewportTexture" id="ViewportTexture_jy3fw"]
viewport_path = NodePath("RedLayer/TempMasks")

[sub_resource type="ViewportTexture" id="ViewportTexture_t8chk"]
viewport_path = NodePath("RedLayer/LevelVisual")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xhed0"]
resource_local_to_scene = true
shader = ExtResource("2_hx44q")
shader_parameter/red_texture = SubResource("ViewportTexture_t8chk")
shader_parameter/red_mask = ExtResource("8_beq0j")
shader_parameter/green_texture = SubResource("ViewportTexture_8652m")
shader_parameter/green_mask = ExtResource("7_1idop")
shader_parameter/blue_texture = SubResource("ViewportTexture_xm42n")
shader_parameter/blue_mask = ExtResource("6_rjtee")
shader_parameter/red_temp_masks = SubResource("ViewportTexture_jy3fw")
shader_parameter/green_temp_masks = SubResource("ViewportTexture_6wmxb")
shader_parameter/blue_temp_masks = SubResource("ViewportTexture_qiqrj")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_3wkli"]
load_path = "res://.godot/imported/Lvl0_blue_mask.png-f889f6d64c45ade2cfca199b538316ff.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_6tyme"]
viewport_path = NodePath("BlueLayer/TempMasks")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_sdsxl"]
load_path = "res://.godot/imported/Lvl0_blue_col.png-13ab681ceca001b7761fc48b279bba09.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_oqb7r"]
load_path = "res://.godot/imported/Lvl0_green_mask.png-f2791553c6b72f191252b857ddb14641.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_ktasi"]
viewport_path = NodePath("GreenLayer/TempMasks")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_ysbpt"]
load_path = "res://.godot/imported/Lvl0_green_col.png-a05b2a1dc02479958cbebcb362b65056.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_5fklp"]
load_path = "res://.godot/imported/Lvl0_red_mask.png-e7dfd2b036206ebfce7f2945aa388bb4.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_hxcog"]
viewport_path = NodePath("RedLayer/TempMasks")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_irrfb"]
load_path = "res://.godot/imported/Lvl0_red_col.png-59fc904a44126b6134852610c0b61fe9.ctex"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bi6q3"]
resource_local_to_scene = true
shader = ExtResource("2_hx44q")
shader_parameter/red_texture = SubResource("CompressedTexture2D_irrfb")
shader_parameter/red_mask = SubResource("CompressedTexture2D_5fklp")
shader_parameter/green_texture = SubResource("CompressedTexture2D_ysbpt")
shader_parameter/green_mask = SubResource("CompressedTexture2D_oqb7r")
shader_parameter/blue_texture = SubResource("CompressedTexture2D_sdsxl")
shader_parameter/blue_mask = SubResource("CompressedTexture2D_3wkli")
shader_parameter/red_temp_masks = SubResource("ViewportTexture_hxcog")
shader_parameter/green_temp_masks = SubResource("ViewportTexture_ktasi")
shader_parameter/blue_temp_masks = SubResource("ViewportTexture_6tyme")

[sub_resource type="Gradient" id="Gradient_ir1ia"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_lslib"]
resource_local_to_scene = true
gradient = SubResource("Gradient_ir1ia")
width = 1510
height = 1080

[sub_resource type="Shader" id="Shader_d78wo"]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform sampler2D red_texture;
uniform sampler2D red_mask;

uniform sampler2D green_texture;
uniform sampler2D green_mask;

uniform sampler2D blue_texture;
uniform sampler2D blue_mask;
uniform sampler2D red_temp_masks;
uniform sampler2D green_temp_masks;
uniform sampler2D blue_temp_masks;


void fragment() {
	if (texture(red_mask, UV).a > 0.0 || texture(red_temp_masks, UV).a > 0.0){
		COLOR = texture(red_texture, UV);
	}
	else if (texture(green_mask, UV).a > 0.0 || texture(green_temp_masks, UV).a > 0.0){
		COLOR = texture(green_texture, UV);
	}
	else if (texture(blue_mask, UV).a > 0.0 || texture(blue_temp_masks, UV).a > 0.0){
		COLOR = texture(blue_texture, UV);
	}
}

//void light() {
//	// Called for every pixel for every light affecting the material.
//	// Uncomment to replace the default light processing function with this one.
//}
"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_wywvs"]
load_path = "res://.godot/imported/Lvl0_blue_mask.png-f889f6d64c45ade2cfca199b538316ff.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_2cjx3"]
viewport_path = NodePath("BlueLayer/TempMasks")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_jsskw"]
load_path = "res://.godot/imported/Lvl0_green_mask.png-f2791553c6b72f191252b857ddb14641.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_qx55u"]
viewport_path = NodePath("GreenLayer/TempMasks")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_7ochp"]
load_path = "res://.godot/imported/Lvl0_red_mask.png-e7dfd2b036206ebfce7f2945aa388bb4.ctex"

[sub_resource type="ViewportTexture" id="ViewportTexture_o45kq"]
viewport_path = NodePath("RedLayer/TempMasks")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ycl4i"]
resource_local_to_scene = true
shader = SubResource("Shader_d78wo")
shader_parameter/red_texture = ExtResource("11_c5gc3")
shader_parameter/red_mask = SubResource("CompressedTexture2D_7ochp")
shader_parameter/green_texture = ExtResource("10_ycv2e")
shader_parameter/green_mask = SubResource("CompressedTexture2D_jsskw")
shader_parameter/blue_texture = ExtResource("9_nauge")
shader_parameter/blue_mask = SubResource("CompressedTexture2D_wywvs")
shader_parameter/red_temp_masks = SubResource("ViewportTexture_o45kq")
shader_parameter/green_temp_masks = SubResource("ViewportTexture_qx55u")
shader_parameter/blue_temp_masks = SubResource("ViewportTexture_2cjx3")

[node name="Level" unique_id=1171352334 node_paths=PackedStringArray("layers", "collision_types") instance=ExtResource("1_mx85b")]
material = SubResource("ShaderMaterial_pieet")
layers = [null, NodePath("RedLayer"), NodePath("GreenLayer"), NodePath("BlueLayer")]
collision_types = [NodePath("Collision"), NodePath("Hazard")]
red_mask = ExtResource("6_ycv2e")
green_mask = ExtResource("7_c5gc3")
blue_mask = ExtResource("8_6e4cv")
red_collision = ExtResource("9_uuy0h")
green_collision = ExtResource("10_52iny")
blue_collision = ExtResource("11_nxqqj")
red_hazard = ExtResource("12_7nyxr")
green_hazard = ExtResource("13_43lh3")
blue_hazard = ExtResource("14_5le63")

[node name="LayerMask" parent="RedLayer" parent_id_path=PackedInt32Array(1461014223) index="1" unique_id=1379613557]
texture = ExtResource("6_ycv2e")

[node name="3D Scene goes here!" parent="RedLayer/LevelVisual" parent_id_path=PackedInt32Array(1461014223, 1892075130) index="0" unique_id=642318865]
texture = ExtResource("15_uuy0h")

[node name="LayerMask" parent="GreenLayer" parent_id_path=PackedInt32Array(1876231418) index="1" unique_id=1379613557]
texture = ExtResource("7_c5gc3")

[node name="3D Scene goes here!" parent="GreenLayer/LevelVisual" parent_id_path=PackedInt32Array(1876231418, 1892075130) index="0" unique_id=642318865]
texture = ExtResource("16_52iny")

[node name="LayerMask" parent="BlueLayer" parent_id_path=PackedInt32Array(1089670503) index="1" unique_id=1379613557]
texture = ExtResource("8_6e4cv")

[node name="3D Scene goes here!" parent="BlueLayer/LevelVisual" parent_id_path=PackedInt32Array(1089670503, 1892075130) index="0" unique_id=642318865]
texture = ExtResource("17_nxqqj")

[node name="CompositeVisuals" parent="." index="4" unique_id=378184343]
material = SubResource("ShaderMaterial_xhed0")

[node name="CollisionMask" parent="Collision/SubViewport" parent_id_path=PackedInt32Array(1520539682, 1472265480) index="0" unique_id=1243604259]
material = SubResource("ShaderMaterial_bi6q3")
texture = SubResource("GradientTexture2D_lslib")

[node name="CollisionMask" parent="Hazard/SubViewport" parent_id_path=PackedInt32Array(2146344563, 1472265480) index="0" unique_id=1243604259]
material = SubResource("ShaderMaterial_ycl4i")

[editable path="RedLayer"]
[editable path="GreenLayer"]
[editable path="BlueLayer"]
[editable path="Collision"]
[editable path="Hazard"]
